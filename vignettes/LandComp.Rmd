---
title: "LandComp"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{LandComp}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(LandComp)
```


# LandComp

LandComp is a package for quantifying landscape diversity and structure at
multiple scales. Juhász-Nagy's functions, i.e. compositional diversity (CD) and
associatum (AS) are used for these purposes.

## Installation

You can install the development version of LandComp using the following command:

``` r
install.packages("devtools")
devtools::install_github("ladylavender/LandComp")
```

## Example

Suggest we have data on some vegetation types along a landscape. Note, there are three requirements:

* the landscape data should be numeric binary, i.e. it should contain 0 or 1 values
* the geometry of the landscape data should be a regular square or hexagonal grid
* the geometry of the landscape data should have projected coordinates (i.e. WGS84 is useless)

### Example for using regular square grid

Let's have a look at the square grid data.

```{r square_data, echo = TRUE}
suppressPackageStartupMessages(library("sf"))
library(LandComp)
data("square_data")
str(square_data)
```

```{r out.width = '80%', echo = FALSE}
filepath = "C:/Users/Kriszti/Documents/Kutatas/Rcsomagfejlesztes/LandComp/LandComp/man/figures"
knitr::include_graphics(paste0(filepath, "/README-square_data-1.png"))
```

**Fig. 1.** Visualization of the square grid data.

CD and AS of the landscape at the scale of the base square grid (i.e. using the input grid cells as spatial units) can be calculated as

```{r square_example1, echo=TRUE}
LandComp(x = square_data, aggregation_steps = 0)
```

However, Juhász-Nagy's functions, i.e. compositional diversity (CD) and associatum (AS) should be calculated at multiple scales. For this purpose spatial units can be selected using rows of grid cells around the central grid cell, where 0 means the original cell without enlargement.

```{r out.width = '80%', echo = FALSE}
filepath = "C:/Users/Kriszti/Documents/Kutatas/Rcsomagfejlesztes/LandComp/LandComp/man/figures"
knitr::include_graphics(paste0(filepath, "/spatial_units_square.png"))
```

**Fig. 2.** Main properties of the spatial units used for the calculation of compositional diversity (CD) and associatum (AS). In the aggregation steps, radially enlarged spatial units consisting of 9, 25, 49 etc. squares are yielded. *: exception from the general formulas, calculation is given in the bottom of the plot.

Analysis can be done more precise by giving also fraction numbers as input. Thus, the following values of CD and AS can be calculated as e.g.

```{r square_example2, echo=TRUE}
LandComp(x = square_data, aggregation_steps = c(0.5, 1))
```

### Example for using regular hexagonal grid

The example dataset contains pointy-topped hexagons. Note, the methods are also fine for regular hexagonal grids containing flat-topped hexagons. 
Let's have a look at the hexagonal grid data.

```{r hexagonal_data, echo = TRUE}
data("hexagonal_data")
plot(hexagonal_data)
str(hexagonal_data)
```

```{r out.width = '80%', echo = FALSE}
filepath = "C:/Users/Kriszti/Documents/Kutatas/Rcsomagfejlesztes/LandComp/LandComp/man/figures"
knitr::include_graphics(paste0(filepath, "/README-hexagonal_data-1.png"))
```

**Fig. 3.** Visualization of the hexagonal grid data.

CD and AS of the landscape at the scale of the base hexagonal grid (i.e. using the input grid cells as spatial units) can be calculated as 

```{r hexagonal_example1, echo=TRUE}
LandComp(x = hexagonal_data, aggregation_steps = 0)
```

However, Juhász-Nagy's functions, i.e. compositional diversity (CD) and associatum (AS) should be calculated at multiple scales. For this purpose spatial units can be selected using rows of grid cells around the central grid cell, where 0 means the original cell without enlargement.

```{r out.width = '80%', echo = FALSE}
filepath = "C:/Users/Kriszti/Documents/Kutatas/Rcsomagfejlesztes/LandComp/LandComp/man/figures"
knitr::include_graphics(paste0(filepath, "/spatial_units_hexagon.png"))
```

**Fig. 3.** Main properties of the spatial units used for the calculation of compositional diversity (CD) and associatum (AS). In the aggregation steps, radially enlarged spatial units consisting of 7, 19, 37 etc. hexagons are yielded. *: exception from the general formulas, calculation is given in the bottom of the plot.

Analysis can be done more precise by giving also fraction numbers as input. Thus, the following values of CD and AS can be calculated as e.g.

```{r hexagonal_example2, echo=TRUE}
LandComp(x = hexagonal_data, aggregation_steps = c(1, 1.5))
```

Note, in the case of hexagonal grid, steps falling in the interval ]0,1[ cannot be evaluated. 
